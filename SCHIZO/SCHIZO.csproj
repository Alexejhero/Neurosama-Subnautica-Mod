<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
        <Configurations>Subnautica;BelowZero</Configurations>
        <NoWarn>$(NoWarn);CS0436;CS0649;Publicizer001;</NoWarn>
    </PropertyGroup>

    <Import Project="Subnautica.props" Condition=" '$(Configuration)' == 'Subnautica' " />
    <Import Project="BelowZero.props" Condition=" '$(Configuration)' == 'BelowZero' " />

    <ItemGroup>
        <PackageReference Include="BepInEx.Core" Version="5.4.21" />
        <PackageReference Include="TwitchLib" Version="3.5.3" Embed="true" GeneratePathProperty="true" />
        <PackageReference Include="UnityEngine.Modules" Version="2019.4.36" />

        <PackageReference Include="BepInEx.Analyzers" Version="1.0.8" PrivateAssets="all" />
        <PackageReference Include="BepInEx.AssemblyPublicizer.MSBuild" Version="0.4.1" PrivateAssets="all" />
    </ItemGroup>

    <ItemGroup>
        <Compile Include="$(SolutionDir)/Unity/Assets/Scripts/SCHIZO/**/*.cs" LinkBase=".">
            <DependentUpon>%(FileName).cs</DependentUpon>
        </Compile>
        <Compile Remove="$(SolutionDir)/Unity/Assets/Scripts/SCHIZO/**/*.Unity.cs" />
        <Folder Include="Enums/BelowZero" />
        <Folder Include="Enums/Subnautica" />
        <Folder Include="Materials" />
        <Folder Include="Packages\" />
        <Folder Include="Utilities" />
        <Compile Update="..\Unity\Assets\Scripts\SCHIZO\Creatures\Components\CustomCreature.cs">
          <Link>Interop\CustomCreature.cs</Link>
          <DependentUpon>CustomCreature.cs</DependentUpon>
        </Compile>
        <Compile Update="..\Unity\Assets\Scripts\SCHIZO\Interop\_Creature.cs">
          <Link>Interop\Subnautica\_Creature.cs</Link>
          <DependentUpon>_Creature.cs</DependentUpon>
        </Compile>
        <Compile Update="..\Unity\Assets\Scripts\SCHIZO\Interop\_MeleeAttack.cs">
          <Link>Interop\Subnautica\_MeleeAttack.cs</Link>
          <DependentUpon>_MeleeAttack.cs</DependentUpon>
        </Compile>
    </ItemGroup>
    
    <ItemGroup>
        <EmbeddedResource Include="Resources/**" />
        <EmbeddedResource Remove="Resources/**/*.cs" />
        <EmbeddedResource Remove="Resources/AssetBundles/AssetBundles" />
        <EmbeddedResource Remove="Resources/AssetBundles/*.manifest" />
        <None Remove="Resources/AssetBundles/AssetBundles" />
        <None Remove="Resources/AssetBundles/AssetBundles.manifest" />
        
        <None Update="Resources/AssetBundles/*.manifest">
            <DependentUpon>%(FileName)</DependentUpon>
        </None>

        <Compile Update="Resources/AssetBundles/*.cs">
            <DependentUpon>%(FileName)</DependentUpon>
        </Compile>
    </ItemGroup>

<!--    <Target Name="EmbedNuGetDlls" AfterTargets="ResolveReferences">
        <ItemGroup>
            <EmbeddedResource Include="@(ReferencePath)" Condition="$([System.String]::new('%(FullPath)').StartsWith($(NuGetPackageRoot)))">
                <LinkBase>Resources/Packages</LinkBase>
                <LogicalName>%(FileName)%(Extension)</LogicalName>
            </EmbeddedResource>
        </ItemGroup>
    </Target>-->

    <ItemGroup>
        <Compile Remove="_old/**" />
        <None Include="_old/**" />
    </ItemGroup>
</Project>
